(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{285:function(t,e,s){},286:function(t,e,s){"use strict";var n=s(278),a=s.n(n),i=s(67),r=s.n(i),o=s(49),l=s.n(o);e.a={methods:{getDates:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t)return[];for(var s=t.match(/\d+-\d+-(\d+).*/)[1],n=this.os.isIOS?t.replace(/-/g,"/"):t,a=[],i=0;i<e;i++){var r=new Date(n);r.setDate(1*s-e+i);var o=r.getFullYear(),l=r.getMonth()+1,c=r.getDate(),u=o+"-"+(l>9?l:"0"+l)+"-"+(c>9?c:"0"+c),h=(l>9?l:"0"+l)+"-"+(c>9?c:"0"+c);a.push({full:u,simple:h})}return a},formatTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=arguments[1],s=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),i=t.getHours(),r=t.getMinutes(),o=t.getSeconds(),l=[s,n,a].map(this.formatNumber).join("-"),c=[i,r,o].map(this.formatNumber).join(":");return"date"===e?""+l:l+" "+c},formatNumber:function(t){var e=t.toString();return e[1]?e:"0"+e},getKsLx:function(){var t=this;return this.$store.state.ksLx.length>0?l.a.resolve(this.$store.state.ksLx):this.$http("cache/getKslx.jsmeb",{}).then((function(e){if(e&&e.result)return t.$store.dispatch("SETKSLX",e.result),e.result}))},getUserInfo:function(){var t=this;return r()(this.$store.state.userInfo).length?l.a.resolve(this.$store.state.userInfo):this.$http("h5pj/getCurrUser.jsmeb",{}).then((function(e){if(e&&e.result)return t.$store.dispatch("SETUSERINFO",e.result||{}),e.result||{}}))},getJs:function(){var t=this;return r()(this.$store.state.jsInfo).length?l.a.resolve(this.$store.state.jsInfo):this.$http("yhxx/getJs.jsmeb",{}).then((function(e){if(e&&e.result)return t.$store.dispatch("SETJSINFO",e.result||{}),e.result||{}}))},getXq:function(){var t=this;return r()(this.$store.state.xq).length?l.a.resolve(this.$store.state.xq):this.$http("cache/getCurrentXq.jsmeb",{}).then((function(e){if(e&&e.result)return t.$store.dispatch("SETXQ",e.result||{}),e.result||{}}))},getPjlc:function(){var t=this;return this.$store.state.pjlc.length>0?l.a.resolve(this.$store.state.pjlc):this.$http("cache/getPjlc.jsmeb",{}).then((function(e){if(e&&e.result)return t.$store.dispatch("SETPJLC",e.result),e.result}))},getKsty:function(){var t=this;return this.$store.state.ksty.length>0?l.a.resolve(this.$store.state.ksty):this.$http("cache/getKsty.jsmeb",{}).then((function(e){if(e&&e.result){var s={},n=!0,i=!1,r=void 0;try{for(var o,l=a()(e.result);!(n=(o=l.next()).done);n=!0){var c=o.value;s[c.key]=c.mc}}catch(t){i=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw r}}return t.$store.dispatch("SETKSTY",s),s}}))}}}},287:function(t,e,s){"use strict";var n=s(285);s.n(n).a},288:function(t,e,s){"use strict";var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nodata"},[e("div",{staticClass:"ndpic"},[e("img",{attrs:{src:this.imgSrc,width:"100%"}})]),this._v(" "),e("p",{staticClass:"f-tac nodatatxt f-fs2"},[this._v(this._s(this.warntxt))])])};n._withStripped=!0;var a={name:"nodata",props:{warntxt:{type:String,default:"暂无数据"}},data:function(){return{imgSrc:"static/image/nodata.png"}}},i=(s(287),s(9)),r=Object(i.a)(a,n,[],!1,null,"210a917b",null);r.options.__file="src/components/nodata.vue";e.a=r.exports},298:function(t,e,s){},316:function(t,e,s){"use strict";var n=s(298);s.n(n).a},341:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"scan"},[s("div",{staticClass:"scanItem"},[s("p",{staticClass:"num"},[t._v(t._s(t.jkData.ksnum))]),t._v(" "),s("p",{staticClass:"lable"},[t._v("总人数")])]),t._v(" "),s("div",{staticClass:"scanItem"},[s("p",{staticClass:"num"},[t._v(t._s(t.jkData.qknum))]),t._v(" "),s("p",{staticClass:"lable"},[t._v("缺考")])]),t._v(" "),s("div",{staticClass:"scanItem"},[s("p",{staticClass:"num"},[t._v(t._s(t.jkData.smnum)+"/"+t._s(t.jkData.ksnum))]),t._v(" "),s("p",{staticClass:"lable"},[t._v("扫描")])]),t._v(" "),s("div",{staticClass:"scanItem"},[s("p",{staticClass:"num"},[t._v(t._s(t.jkData.scnum))]),t._v(" "),s("p",{staticClass:"lable"},[t._v("上传")])])]),t._v(" "),s("van-tabs",{model:{value:t.tabM,callback:function(e){t.tabM=e},expression:"tabM"}},[s("van-tab",{attrs:{title:"客观选择率",name:"xzl"}},[s("div",{staticStyle:{width:"100vw"}},[s("v-table",{ref:"kgTable",staticStyle:{width:"100%",color:"#000"},attrs:{"is-horizontal-resize":"",columns:t.xzlColumns,"table-data":t.xzlData,"row-hover-color":"#eee","row-click-color":"#edf7ff","show-vertical-border":!1}})],1)]),t._v(" "),s("van-tab",{attrs:{title:"阅卷进度",name:"yjjd"}},[s("div",{staticStyle:{width:"100vw"}},[s("v-table",{ref:"jdTable",staticStyle:{width:"100%",color:"#000"},attrs:{"is-horizontal-resize":"",columns:t.columns,"table-data":t.tableData,"row-hover-color":"#eee","row-click-color":"#edf7ff","show-vertical-border":!1,"select-group-change":t.selectGroupChange}})],1)]),t._v(" "),"yjjd"===t.tabM&&t.tableData.length>0?s("div",{staticClass:"footOpt jdBtn"},[s("van-button",{on:{click:function(e){return t.optPj(0)}}},[t._v("开始")]),t._v(" "),s("van-button",{attrs:{type:"info"},on:{click:function(e){return t.optPj(1)}}},[t._v("暂停")]),t._v(" "),s("van-button",{on:{click:function(e){return t.optPj(2)}}},[t._v("结束")]),t._v(" "),s("van-button",{on:{click:function(e){t.showSheet=!0}}},[s("van-icon",{attrs:{name:"ellipsis"}})],1)],1):t._e()],1),t._v(" "),s("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消","close-on-click-action":""},on:{select:t.select},model:{value:t.showSheet,callback:function(e){t.showSheet=e},expression:"showSheet"}}),t._v(" "),s("van-dialog",{attrs:{title:t.dialogTitle,"before-close":t.beforeClose,"show-cancel-button":""},on:{confirm:t.confirm},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[t.showDialog?s("div",[s("van-form",{ref:"form"},[0===t.dialogType?[s("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),s("van-field",{attrs:{name:"误差分",label:"误差分",placeholder:"误差分",rules:[{required:!0,message:"请填写误差分"}]},model:{value:t.form.wcval,callback:function(e){t.$set(t.form,"wcval",e)},expression:"form.wcval"}}),t._v(" "),s("van-field",{attrs:{name:"switch",label:"误差给组长"},scopedSlots:t._u([{key:"input",fn:function(){return[s("van-switch",{attrs:{size:"20","active-value":"1","inactive-value":"0"},model:{value:t.switchChecked,callback:function(e){t.switchChecked=e},expression:"switchChecked"}})]},proxy:!0}],null,!1,3415607852)})]:t._e(),t._v(" "),2===t.dialogType||1===t.dialogType?[s("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})]:t._e()],2)],1):t._e()])],1)};n._withStripped=!0;var a=s(282),i=s.n(a),r=s(279),o=s.n(r),l=s(280),c=s.n(l),u=s(288),h=s(283),f={mixins:[s(286).a],data:function(){var t=this;return{active:{kmh:"",testh:""},dialogTitle:"提示",dialogType:0,switchChecked:!1,showDialog:!1,showSheet:!1,actions:[{name:"一评转二评",key:0},{name:"二评转一评",key:1},{name:"清除数据",key:2}],tabM:"",jkData:{},selection:[],tableData:[],lcL:[],xzlColumns:[],xzlData:[],form:{},columns:[{width:30,titleAlign:"center",columnAlign:"center",type:"selection",isFrozen:!0},{field:"tzh",title:"题组[名称]",width:100,titleAlign:"center",columnAlign:"center",isFrozen:!0,formatter:function(t,e,s,n){return 1*t.chnum+1*t.ddycnum>0?'<span style="color:#f9a650">'+t.tzh+"["+t.tzmc+"]</span>":t.tzh+"["+t.tzmc+"]"}},{field:"status",title:"状态",width:90,titleAlign:"center",columnAlign:"center",isResize:!0,formatter:function(e,s,n,a){return'<span style="color:'+(1*e.status==2?"#27ac75":1*e.status==3||1*e.status==4?"#ff7775":"#f9a650")+'">'+t.lc.find((function(t){return 1*t.key==1*e.status})).mc+(1*e.pjcs==2?"(双)":"")+"</span>"}},{field:"jhl",title:"计划量",width:60,titleAlign:"center",columnAlign:"center",isResize:!0},{field:"tzjd",title:"进度",width:56,titleAlign:"center",columnAlign:"center",isResize:!0,formatter:function(e,s,n,a){return"<span>"+t.round(e.tzjd)+"%</span>"}},{field:"pjf",title:"平均分/标准差",width:110,titleAlign:"center",columnAlign:"center",isResize:!0,formatter:function(e,s,n,a){return"<span>"+t.round1(e.pjf)+"/"+t.round1(e.bzc)+"</span>"}}]}},components:{VTable:h.VTable,nodata:u.a},computed:{kmh:function(){return this.$store.state.currentKs.kmh},testh:function(){return this.$store.state.currentKs.testh}},mounted:function(){var t=this;return c()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPjlc();case 2:t.lc=e.sent;case 3:case"end":return e.stop()}}),e,t)})))()},activated:function(){this.upDate()},methods:{upDate:function(){this.active.testh===this.testh&&this.active.kmh===this.kmh||(this.active.testh=JSON.parse(i()(this.testh)),this.active.kmh=JSON.parse(i()(this.kmh)),this.getScanJk(),this.getKgxzl())},beforeClose:function(t,e){"confirm"===t?e(!1):e()},confirm:function(){var t=this;return this.$refs.form.validate().then((function(e){return t.$http("yhxx/checkPwd.jsmeb",{data:[t.form.password]}).then((function(e){if(e&&e.result&&1*e.result.code==0)t.$notify({type:"danger",message:"密码"+e.result.msg});else{var s={data:[t.testh,t.kmh,t.selection.map((function(t){return t.tzh})).join(",")]};0===t.dialogType&&(s={data:[t.testh,t.kmh,t.selection.map((function(t){return t.tzh})).join(","),0===t.dialogType?t.form.wcval:null,0===t.dialogType?t.switchChecked:null]}),t.$http(["pjjk/convert1Pto2P.jsmeb","pjjk/convert2Pto1P.jsmeb","pjjk/clearYdd.jsmeb"][t.dialogType],s).then((function(e){e&&e.result&&1*e.result.code==0&&(t.getScanJk(),t.showDialog=!1)}))}}))}))},select:function(t,e){if(this.selection.length>0){if(this.switchChecked=!1,this.form={},0===t.key){var s=this.selection.find((function(t){return 1*t.pjcs==2}));if(s)return void this.$toast("题组"+s.tzh+"为二评题组")}else if(1===t.key){var n=this.selection.find((function(t){return 1*t.pjcs==1}));if(n)return void this.$toast("题组"+n.tzh+"为一评题组")}this.dialogTitle=t.name,this.dialogType=t.key,this.showDialog=!0}else this.$toast("请选择题组")},optPj:function(t){var e=this;this.selection.length>0?this.$http(["pjjk/startPj.jsmeb","pjjk/stopPj.jsmeb","pjjk/closePj.jsmeb"][t],{data:[this.testh,this.kmh,this.selection.map((function(t){return t.tzh})).join(",")]}).then((function(t){t&&t.result&&1*t.result.code==0&&e.getScanJk()})):this.$toast("请选择题组")},selectGroupChange:function(t){this.selection=t},round:function(t){return isNaN(t)?0:Math.round(1e4*t)/100},round1:function(t){return isNaN(t)?0:Math.round(100*t)/100},getKgxzl:function(){var t=this;return this.$http("cj/getKgxzl.jsmeb",{data:[this.testh,this.kmh,""]}).then((function(e){e&&e.result&&(t.xzlColumns=e.result.vTitle.map((function(t){return{field:t.key,title:t.mc,titleAlign:"center",columnAlign:"center",isFrozen:"left"===t.fix,width:100,isResize:!0}})),t.xzlData=e.result.vMetaData.map((function(t){var e={};return t.forEach((function(t){e[t.key]=t.value})),e})),t.$refs.kgTable.resize())}))},getScanJk:function(){var t=this;return this.$http("pjjk/getYjjk.jsmeb",{data:[this.testh,this.kmh,""]}).then((function(e){e&&e.result&&1*e.result.code==0&&(t.selection=[],t.jkData=e.result.result,t.tableData=t.jkData.vList,t.$refs.jdTable.resize())}))}}},d=(s(316),s(9)),v=Object(d.a)(f,n,[],!1,null,"11e1079c",null);v.options.__file="src/views/testDetail/totalData.vue";e.default=v.exports}}]);
//# sourceMappingURL=totalData.js.map?v=0.18796360809065904