(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{285:function(t,s,e){},286:function(t,s,e){"use strict";var n=e(278),r=e.n(n),i=e(67),a=e.n(i),c=e(49),h=e.n(c);s.a={methods:{getDates:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t)return[];for(var e=t.match(/\d+-\d+-(\d+).*/)[1],n=this.os.isIOS?t.replace(/-/g,"/"):t,r=[],i=0;i<s;i++){var a=new Date(n);a.setDate(1*e-s+i);var c=a.getFullYear(),h=a.getMonth()+1,u=a.getDate(),o=c+"-"+(h>9?h:"0"+h)+"-"+(u>9?u:"0"+u),l=(h>9?h:"0"+h)+"-"+(u>9?u:"0"+u);r.push({full:o,simple:l})}return r},formatTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,s=arguments[1],e=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),i=t.getHours(),a=t.getMinutes(),c=t.getSeconds(),h=[e,n,r].map(this.formatNumber).join("-"),u=[i,a,c].map(this.formatNumber).join(":");return"date"===s?""+h:h+" "+u},formatNumber:function(t){var s=t.toString();return s[1]?s:"0"+s},getKsLx:function(){var t=this;return this.$store.state.ksLx.length>0?h.a.resolve(this.$store.state.ksLx):this.$http("cache/getKslx.jsmeb",{}).then((function(s){if(s&&s.result)return t.$store.dispatch("SETKSLX",s.result),s.result}))},getUserInfo:function(){var t=this;return a()(this.$store.state.userInfo).length?h.a.resolve(this.$store.state.userInfo):this.$http("h5pj/getCurrUser.jsmeb",{}).then((function(s){if(s&&s.result)return t.$store.dispatch("SETUSERINFO",s.result||{}),s.result||{}}))},getJs:function(){var t=this;return a()(this.$store.state.jsInfo).length?h.a.resolve(this.$store.state.jsInfo):this.$http("yhxx/getJs.jsmeb",{}).then((function(s){if(s&&s.result)return t.$store.dispatch("SETJSINFO",s.result||{}),s.result||{}}))},getXq:function(){var t=this;return a()(this.$store.state.xq).length?h.a.resolve(this.$store.state.xq):this.$http("cache/getCurrentXq.jsmeb",{}).then((function(s){if(s&&s.result)return t.$store.dispatch("SETXQ",s.result||{}),s.result||{}}))},getPjlc:function(){var t=this;return this.$store.state.pjlc.length>0?h.a.resolve(this.$store.state.pjlc):this.$http("cache/getPjlc.jsmeb",{}).then((function(s){if(s&&s.result)return t.$store.dispatch("SETPJLC",s.result),s.result}))},getKsty:function(){var t=this;return this.$store.state.ksty.length>0?h.a.resolve(this.$store.state.ksty):this.$http("cache/getKsty.jsmeb",{}).then((function(s){if(s&&s.result){var e={},n=!0,i=!1,a=void 0;try{for(var c,h=r()(s.result);!(n=(c=h.next()).done);n=!0){var u=c.value;e[u.key]=u.mc}}catch(t){i=!0,a=t}finally{try{!n&&h.return&&h.return()}finally{if(i)throw a}}return t.$store.dispatch("SETKSTY",e),e}}))}}}},287:function(t,s,e){"use strict";var n=e(285);e.n(n).a},288:function(t,s,e){"use strict";var n=function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"nodata"},[s("div",{staticClass:"ndpic"},[s("img",{attrs:{src:this.imgSrc,width:"100%"}})]),this._v(" "),s("p",{staticClass:"f-tac nodatatxt f-fs2"},[this._v(this._s(this.warntxt))])])};n._withStripped=!0;var r={name:"nodata",props:{warntxt:{type:String,default:"暂无数据"}},data:function(){return{imgSrc:"static/image/nodata.png"}}},i=(e(287),e(9)),a=Object(i.a)(r,n,[],!1,null,"210a917b",null);a.options.__file="src/components/nodata.vue";s.a=a.exports},302:function(t,s,e){},320:function(t,s,e){"use strict";var n=e(302);e.n(n).a},343:function(t,s,e){"use strict";e.r(s);var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page"},[e("van-search",{attrs:{placeholder:"搜索"},on:{search:t.onSearch},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}}),t._v(" "),e("div",{staticClass:"content"},[t.fpJs.length?e("section",[e("p",{staticClass:"title"},[t._v("已分配教师")]),t._v(" "),e("ul",{staticClass:"list"},t._l(t.fpJs,(function(s){return e("li",{key:s.teacherid,on:{click:function(e){return t.editJs(s,"edit")}}},[e("div",{staticClass:"teacher-tz"},[e("p",{staticClass:"name"},[t._v(t._s(s.xm))]),t._v(" "),e("p",{staticClass:"tz"},[t._v(t._s(s.tzs))])]),t._v(" "),e("i",{staticClass:"iconfont iconarrow-right-copy"})])})),0)]):t._e(),t._v(" "),e("ul",{staticClass:"list unFpList"},t._l(t.unFpJs,(function(s){return e("li",{on:{click:function(e){return t.editJs(s,"add")}}},[e("div",{staticClass:"teacher-tz"},[e("p",{staticClass:"name"},[t._v(t._s(s.xm))])]),t._v(" "),e("button",{staticClass:"add"},[t._v("添加")])])})),0),t._v(" "),t.fpJs.length||t.unFpJs.length?t._e():e("nodata",{attrs:{warntxt:"暂无教师数据"}})],1),t._v(" "),e("van-action-sheet",{attrs:{"cancel-text":"确定",title:"题块"},on:{cancel:t.savePjJsRw},model:{value:t.showAction,callback:function(s){t.showAction=s},expression:"showAction"}},[e("div",{staticClass:"action-content"},[e("van-checkbox-group",{model:{value:t.checkTzs,callback:function(s){t.checkTzs=s},expression:"checkTzs"}},t._l(t.tzs,(function(s){return e("van-checkbox",{key:s.tzh,attrs:{name:s.tzh,shape:"square"}},[t._v(t._s(s.mc))])})),1)],1)])],1)};n._withStripped=!0;var r=e(282),i=e.n(r),a=e(49),c=e.n(a),h=e(278),u=e.n(h),o=e(279),l=e.n(o),f=e(280),v=e.n(f),p=e(281),d=e.n(p),m=e(68),g=e(288),k=e(286),j=[],x={mixins:[k.a],components:{nodata:g.a},data:function(){return{value:"",showAction:!1,fpJs:[],unFpJs:[],tzs:[],checkTzs:[],currentJs:{},currentType:"",kmh:"",testh:""}},activated:function(){this.kmh===this.currentKs.kmh&&this.testh===this.currentKs.testh||this.getData()},computed:d()({},Object(m.b)(["currentKs"])),methods:{update:function(){this.getData()},queryJs:function(){var t=this;return v()(l.a.mark((function s(){var e,n,r;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e=1,n=999,s.next=4,t.getJs();case 4:return r=s.sent,s.abrupt("return",t.$http("js/queryJs.jsmeb",{data:[{lb:7,xm:"",kmh:t.currentKs.kmh,xxh:r.xxh||""},e,n]}).then((function(t){return t})));case 6:case"end":return s.stop()}}),s,t)})))()},getPjJsRw:function(){return this.$http("kmdy/getPjJsRw.jsmeb",{data:[{testh:this.currentKs.testh,kmh:this.currentKs.kmh}]}).then((function(t){return t}))},getKskm_pjtz:function(){var t=this;this.tzs&&this.tzs.length?this.showAction=!0:this.$http("kmdy/getKskm_pjtz.jsmeb",{data:[this.currentKs.testh,this.currentKs.kmh]}).then((function(s){s&&s.result&&(t.tzs=s.result.vPjtz||[],t.tzs.length?t.showAction=!0:(t.showAction=!1,t.$toast("暂无可分配题组")))}))},savePjJsRw:function(){var t=this,s={testh:this.currentKs.testh,kmh:this.currentKs.kmh},e=this.currentJs,n=e.teacherid,r=e.xm,i=[],a=[],c=!0,h=!1,o=void 0;try{for(var l,f=u()(this.checkTzs);!(c=(l=f.next()).done);c=!0){var v=l.value;i.push(d()({jsid:n,jsh:n},s,{tzh:v})),a.push(v)}}catch(t){h=!0,o=t}finally{try{!c&&f.return&&f.return()}finally{if(h)throw o}}var p=d()({jsid:n,jsh:n,xm:r,tzs:a.join("、")},s,{listMx:i});this.$http("kmdy/savePjJsRw.jsmeb",{data:[s,[p]]}).then((function(s){(s=s||{}).result&&t.getData()}))},getData:function(){var t=this;this.tzs=[],c.a.all([this.queryJs(),this.getPjJsRw()]).then((function(s){t.kmh=t.currentKs.kmh,t.testh=t.currentKs.testh;var e=s[0]&&s[0].result&&s[0].result.jslist||[];t.fpJs=s[1]&&s[1].result||[];var n=[],r=!0,a=!1,c=void 0;try{for(var h,o=u()(t.fpJs);!(r=(h=o.next()).done);r=!0){var l=h.value;l.tzs=l.listMx.map((function(t){return t.tzh})).join("、"),l.teacherid=l.jsid,n.push(l.jsid+"")}}catch(t){a=!0,c=t}finally{try{!r&&o.return&&o.return()}finally{if(a)throw c}}t.unFpJs=e.filter((function(t){return!~n.indexOf(t.teacherid+"")})),j=JSON.parse(i()(t.unFpJs))}))},editJs:function(t,s){this.currentJs=t,this.currentType=s,"edit"===this.currentType?this.checkTzs=this.currentJs.tzs.split("、"):this.checkTzs=[],this.getKskm_pjtz()},onSearch:function(){var t=this;this.unFpJs=j.filter((function(s){return~s.xm.indexOf(t.value)}))}}},_=(e(320),e(9)),J=Object(_.a)(x,n,[],!1,null,"d7358dde",null);J.options.__file="src/views/testDetail/taskFp.vue";s.default=J.exports}}]);
//# sourceMappingURL=taskFp.js.map?v=0.18796360809065904